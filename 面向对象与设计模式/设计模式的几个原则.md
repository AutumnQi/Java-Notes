# 设计模式的几大原则

## 单一职责

> Single Responsibility Principle

`单一职责原则`：

- 应该有且仅有一个原因引起类的变更，一个接口或类只有一个职责

单一原则带来的优势：

1. 类的复杂性降低，实现什么职责都有清晰明确的定义;
2. 可读性提高，复杂性降低，那当然可读性提高了;
3. 可维护性提高，可读性提高，那当然更容易维护了;
4. 变更引起的风险降低，变更是必不可少的，如果接口的单一职责做得好，一个接口修改只对相应的实现类有影响，对其他的接口无影响，这对系统的扩展性、维护性都有非常大的帮助。

在实际项目中，职责的划分受到多种条件的制约，应尽量满足接口职责单一，具体类的实现可以做取舍

## 里氏替换

>  Liskov Substitution Principle 解决父类和子类的关系

继承的优势：

1. 代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性;
2. 提高代码的重用性;
3. 提高代码的可扩展性，实现父类的方法就可以“为所欲为”了
4. 提高产品或项目的开放性。

继承的劣势：

1. 继承是侵入性的。只要继承，就必须拥有父类的所有属性和方法;
2. 降低代码的灵活性。子类必须拥有父类的属性和方法，让子类自由的世界中多了些约束;
3. 增强了耦合性。当父类的常量、变量和方法被修改时，需要考虑子类的修改，而且在缺乏规范的环境下，这种修改可能带来非常糟糕的结果——大段的代码需要重构。

如何减少继承带来的高耦合劣势，引入里氏替换原则。

`里氏替换原则`：

- 如果对每一个类型为S的对象o1，都有类型为T的对象o2，使得以T定义的所有程序P在所有的对象o1都代换成o2时，程序P的行为没有发生变 化，那么类型S是类型T的子类型
- 所有引用基类的地方必须能透明地使用其子类的对象

即只要父类能出现的地方子类就可以出现，表现在实际应用中则体现在：`类中调用其他类时使用父类或接口`，通过动态的分派再去确认最终的对象类和方法，实现解耦。

几个注意事项：

- 在类中调用其他类时务必要使用父类或接口，如果不能使用父类或接口，则说明类的设计已经违背了LSP原则。
- 如果子类不能完整地实现父类的方法，或者父类的某些方法在子类中已经发生“畸变”，则建议断开父子继承关系，采用依赖、聚集、组合等关系代替继承。
- 子类中方法的前置条件必须与超类中被覆写的方法的前置条件相同或者更宽松（避免在动态分配的时候调用到父类）
- 覆写或实现父类的方法时输出结果可以被缩小（子类方法的返回值必须是父类返回值的子类，分派不检查返回值的类型）

## 依赖倒置原则

> Dependence Inversion Principle 解决多个模块解耦的问题

一个项目是一个团队协作的结果，一个“英雄”再牛也不可能了解所有的业务和所有的技术，要协作就要并行开发，要并行开发就要解决模块之间的项目依赖关系

`依赖倒置原则`

- 高层模块不应该依赖低层模块，两者都应该依赖其抽象; 
- 抽象不应该依赖细节，细节应该依赖抽象。

在Java语言中，抽象就是指接口或抽象类，两者都是不能直接被实例化的;细节就是实现类，实现接口或继承抽象类而产生的类就是细节，其特点就是可以直接被实例化。将上述原则应用到Java中即：

- 模块间的依赖通过抽象发生，实现类之间不发生直接的依赖关系，其依赖关系是通过接口或抽象类产生的;
- 接口或抽象类不依赖于实现类，实现类依赖接口或抽象类。

更加精简的定义就是`面向接口编程`——OOD(Object-Oriented Design)，面向对象设计)的精髓之一，在高层类中对下层类的依赖都通过接口或抽象类来实现。

结合倒置依赖和里氏替换：

> `接口`负责定义public属性和方法，并且声明与其他对象的依赖关系，`抽象类`负责公共构造部分的实现，`实现类`准确的实现业务逻辑，同时在适当的时候对父类进行细化。

## 接口隔离原则

> 抽象来看，可以将接口分为两种
>
> 1. 对象接口，是对一个类型事物的描述，可以用new来生成实例，在Java中即为类
> 2. 类接口，对一组功能的描述，即Java中的接口

`接口隔离原则`：

- 客户端不应该依赖它不需要的接口
- 类间的依赖关系应该建立在最小的接口上

简单来说就是要求接口中的方法尽量少以达到各自的纯洁性，是针对每个接口中的函数而言，希望不同接口的函数不重复。而单一责任原则是针对整个接口的职责，即该接口能完成什么任务，这一项应该是单一的。接口隔离和单一原则有时候会发生冲突，此时的原则为：**根据接口隔离原则拆分接口时，首先必须满足单一职责原则**。

- 接口要高内聚，尽量少公布public方法
- 为不同的访问者设计独立的定制服务
- 接口的细分是有限度的

## 迪米特法则

> Low of Demeter 也称为最少知识原则(Least Knowledge Principle，LKP）

一个对象应该对其他对象有最少的了解。通俗地讲，一个类应该对自己需要耦合或调用的类知道得最少，只关心自己要调用的public部分













